--- a/net/minecraft/world/entity/LightningBolt.java
+++ b/net/minecraft/world/entity/LightningBolt.java
@@ -1,11 +_,11 @@
 package net.minecraft.world.entity;
 
 import com.google.common.collect.Sets;
 import java.util.List;
 import java.util.Optional;
 import java.util.Set;
 import java.util.stream.Stream;
 import javax.annotation.Nullable;
 import net.minecraft.advancements.CriteriaTriggers;
 import net.minecraft.core.BlockPos;
 import net.minecraft.nbt.CompoundTag;
@@ -26,6 +_,6 @@
 import net.minecraft.world.level.gameevent.GameEvent;
 import net.minecraft.world.phys.AABB;
 import net.minecraft.world.phys.Vec3;
 
 public class LightningBolt extends Entity {
    private static final int f_147136_ = 2;
@@ -40,6 +_,9 @@
    private final Set<Entity> f_147134_ = Sets.newHashSet();
    private int f_147135_;
 
+   public boolean isSilent = false; // Spigot
+   private float damage = 5.0F;
+
    public LightningBolt(EntityType<? extends LightningBolt> p_20865_, Level p_20866_) {
       super(p_20865_, p_20866_);
       this.f_19811_ = true;
@@ -74,9 +_,17 @@
 
    }
 
+   public void setDamage(float damage) {
+      this.damage = damage;
+   }
+
+   public float getDamage() {
+      return this.damage;
+   }
+
    public void m_8119_() {
       super.m_8119_();
-      if (this.f_20860_ == 2) {
+      if (!isSilent && this.f_20860_ == 2) { // Spigot
          if (this.f_19853_.m_5776_()) {
             this.f_19853_.m_7785_(this.m_20185_(), this.m_20186_(), this.m_20189_(), SoundEvents.f_12090_, SoundSource.WEATHER, 10000.0F, 0.8F + this.f_19796_.nextFloat() * 0.2F, false);
             this.f_19853_.m_7785_(this.m_20185_(), this.m_20186_(), this.m_20189_(), SoundEvents.f_12089_, SoundSource.WEATHER, 2.0F, 0.5F + this.f_19796_.nextFloat() * 0.2F, false);
@@ -116,13 +_,14 @@
          }
       }
 
-      if (this.f_20860_ >= 0) {
+      if (this.f_20860_ >= 0 && !this.f_20862_) { // CraftBukkit - add !this.visualOnly
          if (!(this.f_19853_ instanceof ServerLevel)) {
             this.f_19853_.m_6580_(2);
          } else if (!this.f_20862_) {
             List<Entity> list1 = this.f_19853_.m_6249_(this, new AABB(this.m_20185_() - 3.0D, this.m_20186_() - 3.0D, this.m_20189_() - 3.0D, this.m_20185_() + 3.0D, this.m_20186_() + 6.0D + 3.0D, this.m_20189_() + 3.0D), Entity::m_6084_);
 
             for(Entity entity : list1) {
+               if (!net.minecraftforge.event.ForgeEventFactory.onEntityStruckByLightning(entity, this))
                entity.m_8038_((ServerLevel)this.f_19853_, this);
             }
 
@@ -145,16 +_,24 @@
          BlockPos blockpos = this.m_142538_();
          BlockState blockstate = BaseFireBlock.m_49245_(this.f_19853_, blockpos);
          if (this.f_19853_.m_8055_(blockpos).m_60795_() && blockstate.m_60710_(this.f_19853_, blockpos)) {
-            this.f_19853_.m_46597_(blockpos, blockstate);
-            ++this.f_147135_;
+            // CraftBukkit start - add "!visualOnly"
+            if (!f_20862_ && !org.bukkit.craftbukkit.v1_18_R2.event.CraftEventFactory.callBlockIgniteEvent(f_19853_, blockpos, this).isCancelled()) {
+               this.f_19853_.m_46597_(blockpos, blockstate);
+               ++this.f_147135_;
+            }
+            // CraftBukkit end
          }
 
          for(int i = 0; i < p_20871_; ++i) {
             BlockPos blockpos1 = blockpos.m_142082_(this.f_19796_.nextInt(3) - 1, this.f_19796_.nextInt(3) - 1, this.f_19796_.nextInt(3) - 1);
             blockstate = BaseFireBlock.m_49245_(this.f_19853_, blockpos1);
             if (this.f_19853_.m_8055_(blockpos1).m_60795_() && blockstate.m_60710_(this.f_19853_, blockpos1)) {
-               this.f_19853_.m_46597_(blockpos1, blockstate);
-               ++this.f_147135_;
+               // CraftBukkit start - add "!visualOnly"
+               if (!f_20862_ && !org.bukkit.craftbukkit.v1_18_R2.event.CraftEventFactory.callBlockIgniteEvent(f_19853_, blockpos1, this).isCancelled()) {
+                  this.f_19853_.m_46597_(blockpos1, blockstate);
+                  ++this.f_147135_;
+               }
+               // CraftBukkit end
             }
          }
 
